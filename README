
The `sfGuardExtraPlugin` is a symfony plugin that provides additional
modules for sfGuardPlugin and sfDoctrineGuardPlugin.

It gives you the modules ForgotPassword and Register.

== Installation ==

  * Install the plugin

    {{{
      symfony plugin:install sfGuardExtraPlugin
    }}}

  * Enable one or more modules in your `settings.yml` (optional)
    * For your frontend application: sfGuardForgotPassword, sfGuardRegister

    {{{
      all:
        .settings:
          enabled_modules:      [default, sfGuardAuth, sfGuardForgotPassword, sfGuardRegister]
    }}}

  * The sfGuardPlugin automatically registered a route named `password` if the module `sfGuardAuth`
  is enabled so you must diable this feature define `sf_guard_plugin_routes_register` to false
  in the `app.yml` configuration file:

    {{{
      all:
        sf_guard_plugin:
          routes_register: false
    }}}

  * Add the following routing rules to `routing.yml`

    {{{
      sf_guard_signin:
        url:   /login
        param: { module: sfGuardAuth, action: signin }

      sf_guard_signout:
        url:   /logout
        param: { module: sfGuardAuth, action: signout }
    }}}

  * Add method `retrieveByUsernameOrEmailAddress` to get a user by email or username in lib/model/doctrine/sfDoctrineGuardPlugin/sfGuardUserTable.class e.q.

    {{{
      static public function retrieveByUsernameOrEmailAddress($usernameOrEmail, $isActive = true )
      {
        return Doctrine_Query::create()->from('sfGuardUser u')->where( '(u.username = ? OR u.email = ?) AND u.is_active = ?', array( $usernameOrEmail, $usernameOrEmail, $isActive ) )->execute()->getFirst();
      }
    }}}

  * Add getter and setter for `email_address` in lib/model/doctrine/sfDoctrineGuardPlugin/sfGuardUser.class e.q.

    {{{
      public function getEmailAddress()
      {
        return $this->email;
      }
      public function setEmailAddress($email)
      {
        $this->email = $email;
      }
    }}}

  * Clear you cache

    {{{
      symfony cc
    }}}

== Email delivery ==

You can override the mail delivery system simple copy `plugins/sfGuardExtraPlugin/lib/sfGuardExtraMail.class.php` to your lib folder and override the send method.

== Validators ==

`sfGuardExtraPlugin` comes with a validator that you can use in your modules:
`sfGuardValidatorUsernameOrEmail`.

This validator is used by the `sfGuardForgotPassword` module to check if user exist for username or email.

== Changelog ==

=== 0.1 ===

  * gimler: initial move from sfDoctrineGuardPlugin
